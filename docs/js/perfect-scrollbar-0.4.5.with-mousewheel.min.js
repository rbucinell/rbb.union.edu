"use strict";(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(O){var W={wheelSpeed:10,wheelPropagation:!1,minScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0};O.fn.perfectScrollbar=function(H,j){return this.each(function(){var n=O.extend(!0,{},W),i=O(this);if("object"==typeof H?O.extend(!0,n,H):j=H,"update"===j)return i.data("perfect-scrollbar-update")&&i.data("perfect-scrollbar-update")(),i;if("destroy"===j)return i.data("perfect-scrollbar-destroy")&&i.data("perfect-scrollbar-destroy")(),i;if(i.data("perfect-scrollbar"))return i.data("perfect-scrollbar");i.addClass("ps-container");var d,h,s,c,b,v,o,l,a,m,e,p=O("<div class='ps-scrollbar-x-rail'></div>").appendTo(i),f=O("<div class='ps-scrollbar-y-rail'></div>").appendTo(i),u=O("<div class='ps-scrollbar-x'></div>").appendTo(p),g=O("<div class='ps-scrollbar-y'></div>").appendTo(f),w=parseInt(p.css("bottom"),10),T=parseInt(f.css("right"),10),L=function(){var e=parseInt(m*(v-c)/(c-a),10);i.scrollTop(e),p.css({bottom:w-e})},y=function(){var e=parseInt(l*(b-s)/(s-o),10);i.scrollLeft(e),f.css({right:T-e})},r=function(e){return e=n.minScrollbarLength?Math.max(e,n.minScrollbarLength):e},D=function(){p.css({left:i.scrollLeft(),bottom:w-i.scrollTop(),width:s}),f.css({top:i.scrollTop(),right:T-i.scrollLeft(),height:c}),u.css({left:l,width:o}),g.css({top:m,height:a})},I=function(){s=i.width(),c=i.height(),b=i.prop("scrollWidth"),v=i.prop("scrollHeight"),s<b?(d=!0,o=r(parseInt(s*s/b,10)),l=parseInt(i.scrollLeft()*(s-o)/(b-s),10)):(d=!1,l=o=0,i.scrollLeft(0)),c<v?(h=!0,a=r(parseInt(c*c/v,10)),m=parseInt(i.scrollTop()*(c-a)/(v-c),10)):(h=!1,m=a=0,i.scrollTop(0)),c-a<=m&&(m=c-a),s-o<=l&&(l=s-o),D()},x=function(e,r){e+=r,r=s-o;l=e<0?0:r<e?r:e,p.css({left:i.scrollLeft()}),u.css({left:l})},S=function(e,r){e+=r,r=c-a;m=e<0?0:r<e?r:e,f.css({top:i.scrollTop()}),g.css({top:m})},t=function(){var r,t;u.bind("mousedown.perfect-scrollbar",function(e){t=e.pageX,r=u.position().left,p.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),O(document).bind("mousemove.perfect-scrollbar",function(e){p.hasClass("in-scrolling")&&(y(),x(r,e.pageX-t),e.stopPropagation(),e.preventDefault())}),O(document).bind("mouseup.perfect-scrollbar",function(){p.hasClass("in-scrolling")&&p.removeClass("in-scrolling")}),r=t=null},C=function(){var r,t;g.bind("mousedown.perfect-scrollbar",function(e){t=e.pageY,r=g.position().top,f.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),O(document).bind("mousemove.perfect-scrollbar",function(e){f.hasClass("in-scrolling")&&(L(),S(r,e.pageY-t),e.stopPropagation(),e.preventDefault())}),O(document).bind("mouseup.perfect-scrollbar",function(){f.hasClass("in-scrolling")&&f.removeClass("in-scrolling")}),r=t=null},k=function(){var l=!1;i.bind("mousewheel.perfect-scrollbar",function(e,r,t,o){n.useBothWheelAxes?h&&!d?o?i.scrollTop(i.scrollTop()-o*n.wheelSpeed):i.scrollTop(i.scrollTop()+t*n.wheelSpeed):d&&!h&&(t?i.scrollLeft(i.scrollLeft()+t*n.wheelSpeed):i.scrollLeft(i.scrollLeft()-o*n.wheelSpeed)):(i.scrollTop(i.scrollTop()-o*n.wheelSpeed),i.scrollLeft(i.scrollLeft()+t*n.wheelSpeed)),I(),(l=function(e,r){var t=i.scrollTop();if(0===t&&0<r&&0===e)return!n.wheelPropagation;if(v-c<=t&&r<0&&0===e)return!n.wheelPropagation;t=i.scrollLeft();return!((0===t&&e<0&&0===r||b-s<=t&&0<e&&0===r)&&n.wheelPropagation)}(t,o))&&e.preventDefault()}),i.bind("MozMousePixelScroll.perfect-scrollbar",function(e){l&&e.preventDefault()})},X=function(){var o=!1;i.bind("mouseenter.perfect-scrollbar",function(){o=!0}),i.bind("mouseleave.perfect-scrollbar",function(){o=!1});O(document).bind("keydown.perfect-scrollbar",function(e){if(o){var r=0,t=0;switch(e.which){case 37:r=-3;break;case 38:t=3;break;case 39:r=3;break;case 40:t=-3;break;default:return}i.scrollTop(i.scrollTop()-t*n.wheelSpeed),i.scrollLeft(i.scrollLeft()+r*n.wheelSpeed),I(),function(e,r){var t=i.scrollTop();if(0===t&&0<r&&0===e)return!1;if(v-c<=t&&r<0&&0===e)return!1;t=i.scrollLeft();return!(0===t&&e<0&&0===r)&&!(b-s<=t&&0<e&&0===r)}(r,t)&&e.preventDefault()}})},P=function(){function e(e){e.stopPropagation()}g.bind("click.perfect-scrollbar",e),f.bind("click.perfect-scrollbar",function(e){var r=parseInt(a/2,10),e=(e.pageY-f.offset().top-r)/(c-a);e<0?e=0:1<e&&(e=1),i.scrollTop((v-c)*e),I()}),u.bind("click.perfect-scrollbar",e),p.bind("click.perfect-scrollbar",function(e){var r=parseInt(o/2,10),e=(e.pageX-p.offset().left-r)/(s-o);e<0?e=0:1<e&&(e=1),i.scrollLeft((b-s)*e),I()})},Y=function(){function l(e,r){i.scrollTop(i.scrollTop()-r),i.scrollLeft(i.scrollLeft()-e),I()}var n={},s=0,c={},t=null,a=!1;O(window).bind("touchstart.perfect-scrollbar",function(){a=!0}),O(window).bind("touchend.perfect-scrollbar",function(){a=!1}),i.bind("touchstart.perfect-scrollbar",function(e){var r=e.originalEvent.targetTouches[0];n.pageX=r.pageX,n.pageY=r.pageY,s=(new Date).getTime(),null!==t&&clearInterval(t),e.stopPropagation()}),i.bind("touchmove.perfect-scrollbar",function(e){var r,t,o;a||1!==e.originalEvent.targetTouches.length||(r=e.originalEvent.targetTouches[0],(o={}).pageX=r.pageX,o.pageY=r.pageY,r=o.pageX-n.pageX,t=o.pageY-n.pageY,l(r,t),n=o,o=(new Date).getTime(),c.x=r/(o-s),c.y=t/(o-s),s=o,e.preventDefault())}),i.bind("touchend.perfect-scrollbar",function(){clearInterval(t),t=setInterval(function(){return Math.abs(c.x)<.01&&Math.abs(c.y)<.01?void clearInterval(t):(l(30*c.x,30*c.y),c.x*=.8,void(c.y*=.8))},10)})},E=function(){i.unbind(".perfect-scrollbar"),O(window).unbind(".perfect-scrollbar"),O(document).unbind(".perfect-scrollbar"),i.data("perfect-scrollbar",null),i.data("perfect-scrollbar-update",null),i.data("perfect-scrollbar-destroy",null),u.remove(),g.remove(),p.remove(),f.remove(),u=g=s=c=b=v=o=l=w=a=m=T=null},M=function(e){i.addClass("ie").addClass("ie"+e);function r(){O(this).addClass("hover")}function t(){O(this).removeClass("hover")}6===e&&(i.bind("mouseenter.perfect-scrollbar",r).bind("mouseleave.perfect-scrollbar",t),p.bind("mouseenter.perfect-scrollbar",r).bind("mouseleave.perfect-scrollbar",t),f.bind("mouseenter.perfect-scrollbar",r).bind("mouseleave.perfect-scrollbar",t),u.bind("mouseenter.perfect-scrollbar",r).bind("mouseleave.perfect-scrollbar",t),g.bind("mouseenter.perfect-scrollbar",r).bind("mouseleave.perfect-scrollbar",t),D=function(){u.css({left:l+i.scrollLeft(),bottom:w,width:o}),g.css({top:m+i.scrollTop(),right:T,height:a}),u.hide().show(),g.hide().show()},L=function(){var e=parseInt(m*v/c,10);i.scrollTop(e),u.css({bottom:w}),u.hide().show()},y=function(){var e=parseInt(l*b/s,10);i.scrollLeft(e),g.hide().show()})},A="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;return(e=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/))&&"msie"===e[1]&&M(parseInt(e[2],10)),I(),t(),C(),P(),A&&Y(),i.mousewheel&&k(),n.useKeyboard&&X(),i.data("perfect-scrollbar",i),i.data("perfect-scrollbar-update",I),i.data("perfect-scrollbar-destroy",E),i})}}),function(s){function r(e){var r=e||window.event,t=[].slice.call(arguments,1),o=0,l=0,n=0;return(e=s.event.fix(r)).type="mousewheel",r.wheelDelta&&(o=r.wheelDelta/120),n=o=r.detail?-r.detail/3:o,void 0!==r.axis&&r.axis===r.HORIZONTAL_AXIS&&(n=0,l=-1*o),void 0!==r.wheelDeltaY&&(n=r.wheelDeltaY/120),void 0!==r.wheelDeltaX&&(l=-1*r.wheelDeltaX/120),t.unshift(e,o,l,n),(s.event.dispatch||s.event.handle).apply(this,t)}var t=["DOMMouseScroll","mousewheel"];if(s.event.fixHooks)for(var e=t.length;e;)s.event.fixHooks[t[--e]]=s.event.mouseHooks;s.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],r,!1);else this.onmousewheel=r},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],r,!1);else this.onmousewheel=null}},s.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery);