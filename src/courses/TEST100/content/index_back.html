<!DOCTYPE html>
<html lang="en">
  <!--                                                                                                      -->
  <!-- Do not modify this file! It was automatically generated. To change it's content go to content folder -->
  <!--                                                                                                      -->
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="author" content="Ryan Bucinell">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Ronald Bucinell's Professional Website">
    <meta name="keywords" content="factulty, professor, profile, ronlad bucinell, union, union college, mechanical, engineering, #{pageName}">
    <meta property="og:site_name" content="rbb.union.edu">
    <meta property="og:title" content="Ronald B. Bucinell Ph.D., P.E">
    <meta property="og:description" content="Ronald B. Bucinell's Professional Website">
    <meta property="og:type" content="website">
    <meta property="og:image" content="img/portrait.jpg">
    <meta property="og:locale" content="en_US">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Ronald B. Bucinell Ph.D., P.E">
    <meta name="twitter:description" content="Ronald B. Bucinell's Professional Website">
    <meta name="twitter:image" content="img/portrait.jpg">
    <meta name="twitter:image:alt" content="Ronald's Portrait">
    <link rel="shortcut icon" href="img/favicon.ico">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap-theme.min.css" integrity="sha384-6pzBo3FDv/PJ8r2KRkGHifhEocL+1X2rVCTTkUfGk7/0pbek5mMa1upzvWbrUbOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/lib.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
  </head>
  <body>
    <article id="wrapper"> 
      <div id="sidebar"><a class="mobilemenu" href="#sidebar"><i class="fa fa-bars"></i></a>
        <div id="main-nav">
          <div id="nav-container">
            <div class="clearfix" id="profile">
              <div class="portrate hidden-xs"></div>
              <div class="title"><a href="/">
                  <h2>Ronald B. Bucinell, Ph.D., P.E.</h2></a>
                <h3>Union College</h3>
              </div>
            </div>
            <nav>
              <ul class="nav navigation" id="mainNavigation"></ul>
              <ul id="courseNameHeader">
                <li>
                  <h4 class="text-stone" id="courseNavName">TEST100</h4>
                </li>
              </ul>
              <ul class="nav navigation" id="courseNavigation"></ul>
            </nav>
          </div>
        </div>
        <div class="social-icons">
          <ul>
            <li><a title="Outlook Contact Card" href="/data/PE_Ronald_B_Bucinell_PhD.msg"><i class="fa fa-envelope-o"></i></a></li>
            <li><a title="LinkedIn Profile" href="https://www.linkedin.com/pub/ronald-bucinell/15/772/5a4"><i class="fa fa-linkedin"></i></a></li>
            <li><a title="Research Gate Profile" href="http://www.researchgate.net/profile/Ronald_Bucinell"><i class="ai ai-researchgate"></i></a></li>
          </ul>
        </div>
      </div>
      <script>
        /**
        * @param {String} HTML representing a single element
        * @return {Element} a DOM element
        */
        function htmlToElement(html) {
            var template = document.createElement('template');
            html = html.trim(); // Never return a text node of whitespace as the result
            template.innerHTML = html;
            return template.content.firstChild;
        }
        
        async function loadXMLDoc(filename)
        {
            let response = await fetch(filename);
            let txt = await response.text();
            return [new DOMParser().parseFromString( txt, 'application/xml'), response.headers.get('Last-Modified')];
        }
        
        async function loadNavigation( filename, ulID )
        {
            let [xmlDoc, modified ] = await loadXMLDoc( filename );
            let ul = document.querySelector(`#${ulID}`);
            xmlDoc.querySelectorAll('item').forEach((item,i) =>
            {
                let li = document.createElement('li');
                let subitems = item.querySelectorAll('subitem');
                if( subitems )
                {
                    li.classList.add('panel');
                    let menuName = item.getAttribute('name');
                    let anchor = htmlToElement(`<a id="${ulID}_menu${i}" data-parent="#${ulID}" data-toggle='collapse' data-target='#${ulID}_submenu${i}' aria-expanded='false'>${menuName}</a>`);
                    let subul  = htmlToElement(`<ul id="${ulID}_submenu${i}" class="nav submenu collapse" role="menu" aria-labelledby="${ulID}_menu${i}"></ul>`);
                    
                    //Add all the sub-menu items to sub-menu
                    item.querySelectorAll('subitem').forEach((sub,j)=>{
                        let subli = document.createElement('li');
                        let suba = htmlToElement(`<a href="${sub.getAttribute('target')}">${sub.getAttribute('name')}</a>`);
                        if( sub.getAttribute('external') )
                        {
                            suba.setAttribute('target', '_blank');
                            suba.appendChild(htmlToElement(`<i class="fa fa-external-link" style="padding-left:1rem;" aria-hidden="true"></i>`));
                        }
                        subli.appendChild(suba);
                        subul.append( subli );
                    });
                    li.appendChild(anchor);
                    li.appendChild(subul);
                }
                ul.append(li);
            });
        }
        
        document.addEventListener('DOMContentLoaded', async ()=> {
            
            await loadNavigation( "/content/data/nav.xml", "mainNavigation");
            if( 'TEST100' )
            {
                await loadNavigation("/courses/TEST100/data/nav.xml",'courseNavigation')
            }
            document.querySelector('#mainNavigation').appendChild(htmlToElement(`<li><a href="/contact.html">Contact</a></li>`));
        });
      </script>
      <main id="main">
        <header class="page-header">
          <h1 id="pageheader">TEST100<small>&nbsp;Introduction to Test</small></h1>
          <ul class="breadcrumb">
            <li><a href="/courselisting.html">Courses</a></li>
            <li><a href="./">TEST100</a></li>
            <li>Main</li>
            <li class="active"><a href="#">Course Home</a></li>
          </ul>
        </header>
        <section id="dadcontent"></section>
        <section class="updated"> </section>
      </main>
      <footer id="footer"> 
        <div class="container"> 
          <ul>
            <li><i class="fa fa-phone"> (518) 388-6023</i></li>
            <li><i class="fa fa-envelope-o"> bucinelr@union.edu</i></li>
          </ul>
        </div>
      </footer>
    </article>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/lib.min.js"></script>
    <script type="text/javascript" src="/js/rbb.min.js"></script>
    <script>
      const event = new Event( 'DadContentLoaded' );
      /**
      * String helper function to see if input string 'str' ends with the string 'suffix'
      **/
      const endsWith = (str, suffix) => str.indexOf(suffix, str.length - suffix.length) !== -1;
      
      /**
      *   Function to format the html list after it is loaded
      **/
      function formatListGroup(headerText) {
          let listOfLI = [...document.querySelectorAll(`.list-group > li`)];
          console.log(listOfLI)
          listOfLI.forEach( n => n.classList +='list-group-item')
          document.querySelector( 'header > h1' ).innerText = `${headerText} (${listOfLI.length})`;
      }
      
      /**
      *  On DOM LOAD fetch the respective content file to populate the page
      **/
      document.addEventListener('DOMContentLoaded', async ()=> {
      
          let contentPath =  `content/${window.location.pathname.split('/').pop()}`;
          let response = await fetch(contentPath);
          if( response.status === 404)
          {
              response = await fetch(`/data/404.html`);
          }
          else {
              let updateDate = new Date(response.headers.get('Last-Modified')).toDateString();
              document.querySelector('.updated').innerText = `Updated: ${updateDate}`;
          }
          let data = await response.text();
          document.querySelector('#dadcontent').innerHTML = data;
          document.dispatchEvent( event );
      });
    </script>
  </body>
</html>