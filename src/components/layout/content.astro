---
const { name, href } = Astro.props;
---
<section class:list={[ "bg-[url('/img/white_noise.jpg')] relative p-3 min-h-[90vh] max-w-6xl",
    "prose",
    "prose-headings:text-rbb-dark",
    "prose-headings:font-normal",
    "prose-headings:text-larger",
    "prose-a:text-union-red",
    "prose-ul:list-none",
    "prose-p:m-4",
    "lg:text-lg",
]}>
    <div id="external_content"></div>
    <slot />
    <section class="flex justify-end updated text-union-garnet italic font-thin"></section>
</section>

<script defer is:inline define:vars={{ name, href }}>
    (async()=> {
        let contentPath = href === '/' ? 'index' : href;
        const content = await fetch( `/content/${contentPath.toLowerCase()}.html`);
        const content_body = await content.text();
        document.querySelector('#external_content').innerHTML = content_body;
        let updateDate = new Date(content.headers.get('Last-Modified')).toDateString();
        document.querySelector('.updated').innerText = `Updated: ${updateDate}`;
    })();
</script>